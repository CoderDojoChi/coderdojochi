{% extends "_base.html" %}

{% load staticfiles i18n coderdojochi_extras %}

{% block title %}Welcome!{% endblock %}

{% block body_class %}homepage{% endblock %}

{% block content %}
<div class="panels">
    <div class="splash panel">
        <div class="panel-content">
            <div class="hero"></div>
            <div class="clouds">
                <div class="cloud-1"></div>
                <div class="cloud-2"></div>
                <div class="cloud-3"></div>
                <div class="cloud-4"></div>
                <div class="cloud-5"></div>
            </div>
            {% if upcoming_class %}
            <div class="upcoming-class">
                <h3 class="title"><i class="fa fa-calendar"></i> Our next class...</h3>
                <p>{% if upcoming_class.course.code %}<small>{{ upcoming_class.course.code }}</small> {% endif %}{{ upcoming_class.course.title }}</p>
                <p>{{ upcoming_class.start_date|date }} at {{ upcoming_class.start_date|time }}</p>
                <p><em class="underline">{{ upcoming_class.capacity|subtract:upcoming_class.get_current_students.all.count }}</em> spots left</p>
                <p>
                    {% if upcoming_class.capacity|subtract:upcoming_class.get_current_students.all.count %}
                    <a href="{{ upcoming_class.get_absolute_url }}" class="btn btn-default">Sign up now!</a>
                    {% else %}
                    <button class="btn btn-default disabled" disabled>Class is full :(</a>
                    {% endif %}
                </p>
                <p><a class="text-muted" href="{% url 'sessions' %}"><small>View all upcoming classes <i class="fa fa-angle-right"></i></a></small></p>
            </div>
            {% endif %}
        </div>
    </div>
    <div class="mission panel">
        <div class="panel-content">
            <div class="container">
                <h1>{% trans "This is our code, and yours." %}</h1>
                <p class="highlight">{% trans "We are here to open doors that are otherwise closed." %}</p>
                <p class="highlight">{% trans "We are here to freely offer our knowledge." %}</p>
                <p class="highlight">{% trans "We speak the language of the future." %}</p>
                <p class="highlight">{% trans "A language that does not discriminate by race, religion, nationality, or gender." %}</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}


{% block extra_script %}
<script src="{% static "js/vendor/jquery.scrollTo.js" %}"></script>
<script src="{% static "js/vendor/jquery.snapscroll.js" %}"></script>
<script src="{% static "js/vendor/skrollr.min.js" %}"></script>
<script>
// init skrollr
var skrollrAPI = skrollr.init({forceHeight: false});

$(function (){
    $('.brand').on('click', function(e) {
        e.preventDefault();
        $('html, body').animate({
            scrollTop: $(".mission:first").offset().top
        }, 750);
        $(this).off('click');
    });

    {% if upcoming_class %}
    setTimeout(function() {
        $('.upcoming-class:first').animate({
            left: 0
        }, 500);
    }, 2000);
    {% endif %}
});

</script>
{% endblock %}
